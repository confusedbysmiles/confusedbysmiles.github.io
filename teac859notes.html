<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Course Weekly Materials</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      display: flex;
      height: 100vh;
      background-color: #f5f5f5;
    }
    .sidebar {
      width: 300px;
      background-color: #fff;
      border-right: 1px solid #ddd;
      display: flex;
      flex-direction: column;
    }
    .sidebar-header {
      padding: 1rem;
      border-bottom: 1px solid #ddd;
      background-color: #fafafa;
    }
    .sidebar-header h2 {
      margin: 0;
      font-size: 1.2rem;
    }
    #weekDates {
      margin-top: 0.5rem;
      font-size: 0.9rem;
      color: #666;
      text-align: center;
    }
    .week-title {
      padding: 0.75rem 1rem;
      font-weight: bold;
      border-bottom: 1px solid #eee;
      background-color: #f9f9f9;
      font-size: 1rem;
      text-align: center;
    }
    .file-list {
      flex: 1;
      overflow-y: auto;
    }
    .file-item {
      padding: 0.75rem 1rem;
      border-bottom: 1px solid #eee;
      cursor: pointer;
      display: flex;
      align-items: center;
      transition: background 0.2s;
    }
    .file-item:hover {
      background-color: #f0f0f0;
    }
    .file-icon {
      margin-right: 0.5rem;
    }
    .file-item.active {
      background-color: #e0eaff;
    }
    .viewer {
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    .viewer-header {
      padding: 1rem;
      background-color: #fafafa;
      border-bottom: 1px solid #ddd;
    }
    .viewer-content {
      flex: 1;
      background-color: #fff;
      position: relative;
      overflow: hidden;
      min-height: 400px;
    }
    .embed-container {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .embed-container iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
    .empty-state {
      text-align: center;
      color: #888;
      font-size: 1rem;
    }
    .empty-icon {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }
    .loading {
      text-align: center;
      color: #555;
      padding: 2rem;
    }
    .spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #3498db;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      animation: spin 1s linear infinite;
      margin: 0 auto 1rem;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    select {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.5rem;
      font-size: 1rem;
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <div class="sidebar-header">
      <h2>Weekly Materials</h2>
      <select id="weekSelect">
        <option value="">-- Select Week --</option>
        <option value="week1">Week 1</option>
        <option value="week2">Week 2</option>
        <option value="week3">Week 3</option>
        <option value="week4">Week 4</option>
        <option value="week5">Week 5</option>
        <option value="week6">Week 6</option>
        <option value="week7">Week 7</option>
        <option value="week8">Week 8</option>
        <option value="week9">Week 9</option>
        <option value="week10">Week 10</option>
        <option value="week11">Week 11</option>
        <option value="week12">Week 12</option>
        <option value="week13">Week 13</option>
        <option value="week14">Week 14</option>
        <option value="week15">Week 15</option>
      </select>
      <div id="weekDates">Select a week to see date range</div>
    </div>
    <div id="weekTitle" class="week-title" style="display:none;"></div>
    <div class="file-list" id="fileList">
      <div style="padding: 1rem; color: #999; text-align: center;">
        Select a week to view files
      </div>
    </div>
  </div>
  <div class="viewer">
    <div class="viewer-header">
      <h2 id="viewerTitle">Document Viewer</h2>
    </div>
    <div class="viewer-content">
      <div class="embed-container" id="embedContainer">
        <div class="empty-state">
          <div class="empty-icon">üìÅ</div>
          <div class="empty-text">No Document Selected</div>
          <div class="empty-subtext">Select a week and choose a file to view</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const weeklyMaterials = {
      week1: {
        folderName: "Week 1: Knowledge Work, Learning, & Design",
        start: "2025-08-21",
        end: "2025-08-28",
        files: [
          { name: "Week 1 Slides", icon: "üìÑ", url: "https://docs.google.com/presentation/d/1F6TU4_e1wvPbWXYkCm3m_BSDSKRumptvUbje1IDRL2M/embed?start=false&loop=false&delayms=3000" }
        ]
      },
      week2: {
        folderName: "Week 2: Rhizome, Weak Theory, Math, and Speculative Design",
        start: "2025-08-29",
        end: "2025-09-04",
        files: [
          { name: "Week 2 Overview.pdf", icon: "üìÑ", url: "https://drive.google.com/file/d/1s6Lo43wlg5BbN06gVwqY1EoOCFQZ6A4G/preview" }
        ]
      },
      week3: {
        folderName: "Week 3: Decentering Education",
        start: "2025-09-05",
        end: "2025-09-11",
        files: [
          { name: "Week 3 Slides", icon: "üìä", url: "https://docs.google.com/presentation/d/1EYQPPFCJhH0kP0ckije6zcApFi3nqJ6lx6WgUdBfigA/embed?start=false&loop=false&delayms=3000" },
          { name: "Claude Reading Work.docx", icon: "üìë", url: "https://docs.google.com/document/d/YOUR_FILE_ID/preview" },
          { name: "Additional Reading.pdf", icon: "üìò", url: "https://drive.google.com/file/d/YOUR_FILE_ID/preview" }
        ]
      },
      week4: { folderName: "Week 4: Epistemology Ontology, and HCD", start: "2025-09-12", end: "2025-09-18", files: [] },
      week5: { folderName: "Week 5: Curriculum Theory", start: "2025-09-19", end: "2025-09-25", files: [] },
      week6: { folderName: "Week 6", start: "2025-09-26", end: "2025-10-02", files: [] },
      week7: { folderName: "Week 7", start: "2025-10-03", end: "2025-10-09", files: [] },
      week8: { folderName: "Week 8", start: "2025-10-10", end: "2025-10-16", files: [] },
      week9: { folderName: "Week 9", start: "2025-10-17", end: "2025-10-23", files: [] },
      week10: { folderName: "Week 10", start: "2025-10-24", end: "2025-10-30", files: [] },
      week11: { folderName: "Week 11", start: "2025-10-31", end: "2025-11-06", files: [] },
      week12: { folderName: "Week 12", start: "2025-11-07", end: "2025-11-13", files: [] },
      week13: { folderName: "Week 13", start: "2025-11-14", end: "2025-11-20", files: [] },
      week14: { folderName: "Week 14", start: "2025-11-21", end: "2025-12-04", files: [] },
      week15: { folderName: "Week 15", start: "2025-12-05", end: "2025-12-12", files: [] }
    };

    const weekSelect = document.getElementById('weekSelect');
    const weekTitle = document.getElementById('weekTitle');
    const fileList = document.getElementById('fileList');
    const embedContainer = document.getElementById('embedContainer');
    const viewerTitle = document.getElementById('viewerTitle');
    const weekDates = document.getElementById('weekDates');

    function formatDateRange(start, end) {
      const opts = { month: "short", day: "numeric" };
      const startStr = new Date(start).toLocaleDateString(undefined, opts);
      const endStr = new Date(end).toLocaleDateString(undefined, opts);
      return `${startStr} ‚Äì ${endStr}`;
    }

    function getCurrentWeekKey() {
      const today = new Date();
      for (const [weekKey, weekData] of Object.entries(weeklyMaterials)) {
        const start = new Date(weekData.start);
        const end = new Date(weekData.end);
        if (today >= start && today <= end) {
          return weekKey;
        }
      }
      return null;
    }

    function initWeek() {
      const currentWeek = getCurrentWeekKey();
      if (currentWeek) {
        weekSelect.value = currentWeek;
        displayWeek(currentWeek);
      } else {
        resetViewer();
        fileList.innerHTML = '<div style="padding: 1rem; color: #999; text-align: center;">Select a week to view files</div>';
        weekDates.textContent = "Select a week to see date range";
        weekTitle.style.display = "none";
      }
    }

    weekSelect.addEventListener('change', function() {
      const selectedWeek = this.value;
      if (selectedWeek && weeklyMaterials[selectedWeek]) {
        displayWeek(selectedWeek);
      } else {
        resetViewer();
        fileList.innerHTML = '<div style="padding: 1rem; color: #999; text-align: center;">Select a week to view files</div>';
        weekDates.textContent = "Select a week to see date range";
        weekTitle.style.display = "none";
      }
    });

    function displayWeek(weekKey) {
      const weekData = weeklyMaterials[weekKey];
      weekTitle.textContent = weekData.folderName;
      weekTitle.style.display = "block";
      weekDates.textContent = formatDateRange(weekData.start, weekData.end);
      displayFiles(weekData);
    }

    function displayFiles(weekData) {
      fileList.innerHTML = '';
      if (!weekData.files || weekData.files.length === 0) {
        fileList.innerHTML = '<div style="padding: 1rem; color: #999; text-align: center;">No files available</div>';
        resetViewer();
        return;
      }
      weekData.files.forEach(file => {
        const fileItem = document.createElement('div');
        fileItem.className = 'file-item';
        fileItem.innerHTML = `<span class="file-icon">${file.icon}</span><span class="file-name">${file.name}</span>`;
        fileItem.addEventListener('click', function() {
          document.querySelectorAll('.file-item').forEach(item => item.classList.remove('active'));
          this.classList.add('active');
          displayFile(file);
        });
        fileList.appendChild(fileItem);
      });
      resetViewer();
    }

    function displayFile(file) {
      viewerTitle.textContent = file.name;
      embedContainer.innerHTML = `<div class="loading"><div class="spinner"></div>Loading document...</div>`;
      setTimeout(() => {
        embedContainer.innerHTML = `<iframe src="${file.url}" allow="autoplay; fullscreen; clipboard-write" allowfullscreen></iframe>`;
      }, 800);
    }

    function resetViewer() {
      viewerTitle.textContent = 'Document Viewer';
      embedContainer.innerHTML = `
        <div class="empty-state">
          <div class="empty-icon">üìÅ</div>
          <div class="empty-text">No Document Selected</div>
          <div class="empty-subtext">Select a week and choose a file to view</div>
        </div>
      `;
    }

    initWeek();
  </script>
</body>
</html>
